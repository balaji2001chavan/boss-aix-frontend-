<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>AIX Live Console</title>
<style>
body{margin:0;font-family:system-ui;background:#0b0f1a;color:#e6e6e6}
header{padding:12px;background:#111827;display:flex;gap:16px;align-items:center}
main{display:grid;grid-template-columns:1fr 1fr;height:calc(100vh - 56px)}
.panel{padding:16px;border-right:1px solid #1f2937}
.preview{padding:16px}
.badge{padding:4px 8px;border-radius:8px;background:#16a34a}
video,img{max-width:100%}
textarea{width:100%;height:120px;background:#020617;color:#e6e6e6}
button{padding:10px 14px;background:#2563eb;color:#fff;border:none;border-radius:8px}
</style>
</head>
<body>
<header>
  <strong>AIX ‚Ä¢ LIVE</strong>
  <span id="time"></span>
  <span id="loc"></span>
  <span id="weather"></span>
  <span class="badge">AUTO</span>
</header>

<main>
  <div class="panel">
    <h3>Command</h3>
    <textarea id="msg" placeholder="‡§¨‡•ã‡§≤‚Ä¶ ‡§≤‡§ø‡§π‡•Ä‚Ä¶"></textarea>
    <br><br>
    <button onclick="send()">Run</button>
    <pre id="log"></pre>
  </div>

  <div class="preview">
    <h3>Live Preview</h3>
    <div id="out">Waiting‚Ä¶</div>
  </div>
</main>

<script>
const BACKEND = "https://boss-aix-backend-nai6.onrender.com";

// Live time
setInterval(()=>time.innerText=new Date().toLocaleString(),1000);

// Location
navigator.geolocation?.getCurrentPosition(p=>{
  loc.innerText=`üìç ${p.coords.latitude.toFixed(2)}, ${p.coords.longitude.toFixed(2)}`;
});

// Weather (FREE KEY ‡§ò‡§æ‡§≤)
const WKEY="YOUR_OPENWEATHER_KEY";
if(WKEY!=="YOUR_OPENWEATHER_KEY"){
  fetch(`https://api.openweathermap.org/data/2.5/weather?q=Pune&appid=${WKEY}&units=metric`)
  .then(r=>r.json()).then(d=>weather.innerText=`üå¶Ô∏è ${d.main.temp}¬∞C`);
}

// Send command
async function send(){
  const r = await fetch(BACKEND+"/api/aix",{
    method:"POST",headers:{'Content-Type':'application/json'},
    body:JSON.stringify({message:msg.value})
  });
  const j = await r.json();
  log.innerText = JSON.stringify(j,null,2);
}

// Poll latest output
async function poll(){
  const r = await fetch(BACKEND+"/api/latest");
  const j = await r.json();
  if(j.path){
    if(j.type==="text"){
      out.innerHTML = `<iframe src="${BACKEND}${j.path}" style="width:100%;height:300px"></iframe>
      <br><a href="${BACKEND}${j.path}" download>Download</a>`;
    }
  }
}
setInterval(poll,2000);
</script>
</body>
</html>
